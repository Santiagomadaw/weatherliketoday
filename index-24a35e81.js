(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function a(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(e){if(e.ep)return;e.ep=!0;const s=a(e);fetch(e.href,s)}})();const l=document.getElementById("container"),g=document.getElementById("searchcity"),h=document.getElementById("search"),y=document.getElementById("tempcelcius"),w=document.getElementById("weathericon"),E=document.getElementById("description"),C=document.getElementById("zone"),I=document.getElementById("date"),L=document.getElementById("min"),x=document.getElementById("max"),c="a00065117a35d1c18108761088dca9fa",d="https://api.openweathermap.org/data/2.5/weather?lang=sp&units=metric",B="https://api.openweathermap.org/data/2.5/weather?";let u=0,p;const r=t=>{const n=new Date(t.dt*1e3);new Date(t.sys.sunrise*1e3),new Date(t.sys.sunset*1e3);const a=n.getHours().toString().padStart(2,"0"),o=n.getMinutes().toString().padStart(2,"0");I.textContent=`${a}:${o}`,t.dt>t.sys.sunrise&&t.dt<t.sys.sunset?(l.classList.remove("night"),l.classList.add("day")):(l.classList.remove("day"),l.classList.add("night")),C.textContent=t.name+" "+t.sys.country,y.textContent=Math.floor(t.main.temp),E.textContent=t.weather[0].description,L.textContent=Math.floor(t.main.temp_min),x.textContent=Math.floor(t.main.temp_max);const e=t.weather[0].icon;w.innerHTML=`<img src="./icons/${e}.png"></img>`},f=async()=>{try{return await(await fetch("http://ip-api.com/json/?fields=61439")).json()}catch{m("la roda, ES")}};function v(t){p=t.coords,u=0,D(p)}const q=async t=>{u=1;const n=await f();m(n.city+", "+n.countryCode)};navigator.geolocation.getCurrentPosition(v,q);const m=async t=>{if(t.includes(",")){const a=await(await fetch(d+"&appid="+c+"&q="+t)).json();r(a)}else if(u===0){const a=await(await fetch("http://api.openweathermap.org/geo/1.0/reverse?lat="+p.latitude+"&lon="+p.longitude+"&limit=1&appid="+c)).json(),e=await(await fetch(d+"&appid="+c+"&q="+t+", "+a[0].country)).json();if(e.message=="city not found"){const i=await(await fetch(d+"&appid="+c+"&q="+t)).json();r(i)}else r(e);r(e)}else if(u===1){const n=await f(),o=await(await fetch(d+"&appid="+c+"&q="+t+", "+n.countryCode)).json();if(o.message=="city not found"){const s=await(await fetch(d+"&appid="+c+"&q="+t)).json();r(s)}else r(o)}},D=async t=>{const n=t.longitude,a=t.latitude,s=await(await fetch(B+"lat="+a+"&lon="+n+"&appid="+c+"&lang=sp&units=metric")).json();r(s)};g.addEventListener("submit",t=>{t.preventDefault(),m(h.value)});
