(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function a(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(t){if(t.ep)return;t.ep=!0;const s=a(t);fetch(t.href,s)}})();const r=document.getElementById("container"),E=document.getElementById("searchcity"),L=document.getElementById("hum"),v=document.getElementById("pres"),I=document.getElementById("search"),B=document.getElementById("tempcelcius"),C=document.getElementById("weathericon"),q=document.getElementById("description"),D=document.getElementById("zone"),f=document.getElementById("plus"),m=document.getElementById("cristal"),M=document.getElementById("date"),O=document.getElementById("min"),P=document.getElementById("max"),S=document.getElementById("windvel"),$=document.getElementById("winang"),A=document.getElementById("compass"),c="a00065117a35d1c18108761088dca9fa",d="https://api.openweathermap.org/data/2.5/weather?lang=sp&units=metric",z="https://api.openweathermap.org/data/2.5/weather?";let h=0,u=0,p;const i=e=>{const n=new Date(e.dt*1e3);new Date(e.sys.sunrise*1e3),new Date(e.sys.sunset*1e3);const a=n.getHours().toString().padStart(2,"0"),o=n.getMinutes().toString().padStart(2,"0");M.textContent=`${a}:${o}`,e.dt>e.sys.sunrise&&e.dt<e.sys.sunset?(r.classList.remove("night"),r.classList.add("day")):(r.classList.remove("day"),r.classList.add("night")),D.textContent=e.name+" "+e.sys.country,B.textContent=Math.floor(e.main.temp),q.textContent=e.weather[0].description,O.textContent=Math.floor(e.main.temp_min),P.textContent=Math.floor(e.main.temp_max),$.style.transform="rotate("+e.wind.deg+"deg)",S.textContent=e.wind.speed,L.textContent=e.main.humidity,v.textContent=e.main.pressure/1e3;const t=e.weather[0].icon;C.innerHTML=`<img src="./icons/${t}.png"></img>`},w=async e=>{try{return await(await fetch("http://ip-api.com/json/?fields=61439")).json()}catch{const a=navigator.language.split("-")[1];e==null?g("la roda, ES"):g(e+", "+a)}};function N(e){p=e.coords,u=0,K(p)}const H=async e=>{u=1;const n=await w();g(n.city+", "+n.countryCode)};navigator.geolocation.getCurrentPosition(N,H);const g=async e=>{if(e.includes(",")){const a=await(await fetch(d+"&appid="+c+"&q="+e)).json();if(a.message=="city not found"){const o=e.split(",")[0],s=await(await fetch(d+"&appid="+c+"&q="+o)).json();i(s)}else i(a)}else if(u===0){const a=await(await fetch("http://api.openweathermap.org/geo/1.0/reverse?lat="+p.latitude+"&lon="+p.longitude+"&limit=1&appid="+c)).json(),t=await(await fetch(d+"&appid="+c+"&q="+e+", "+a[0].country)).json();if(t.message=="city not found"){const l=await(await fetch(d+"&appid="+c+"&q="+e)).json();i(l)}else i(t);i(t)}else if(u===1){const n=await w(e),o=await(await fetch(d+"&appid="+c+"&q="+e+", "+n.countryCode)).json();if(o.message=="city not found"){const s=await(await fetch(d+"&appid="+c+"&q="+e)).json();i(s)}else i(o)}},K=async e=>{const n=e.longitude,a=e.latitude,s=await(await fetch(z+"lat="+a+"&lon="+n+"&appid="+c+"&lang=sp&units=metric")).json();i(s)};E.addEventListener("submit",e=>{e.preventDefault(),g(I.value)});f.addEventListener("click",e=>{e.preventDefault(),h===0?(m.classList.remove("closed"),m.classList.add("opened"),r.classList.remove("closed2"),r.classList.add("opened2"),h=1,f.textContent="-"):(m.classList.remove("opened"),m.classList.add("closed"),r.classList.remove("opened2"),r.classList.add("closed2"),h=0,f.textContent="+")});function R(e){const n=e.acceleration;console.log(`Aceleración en X: ${n.x}`),console.log(`Aceleración en Y: ${n.y}`),console.log(`Aceleración en Z: ${n.z}`),Math.atan2(x,y)}A.style.transform="rotate("+degrees+"deg)";window.addEventListener("devicemotion",R);
