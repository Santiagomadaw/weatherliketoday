(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function a(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(e){if(e.ep)return;e.ep=!0;const n=a(e);fetch(e.href,n)}})();const r=document.getElementById("container"),w=document.getElementById("searchcity"),E=document.getElementById("hum"),L=document.getElementById("pres"),v=document.getElementById("search"),I=document.getElementById("tempcelcius"),B=document.getElementById("weathericon"),C=document.getElementById("description"),x=document.getElementById("zone"),f=document.getElementById("plus"),u=document.getElementById("cristal"),q=document.getElementById("date"),D=document.getElementById("min"),M=document.getElementById("max"),O=document.getElementById("windvel"),P=document.getElementById("winang"),c="a00065117a35d1c18108761088dca9fa",d="https://api.openweathermap.org/data/2.5/weather?lang=sp&units=metric",S="https://api.openweathermap.org/data/2.5/weather?";let y=0,m=0,p;const i=t=>{const s=new Date(t.dt*1e3);new Date(t.sys.sunrise*1e3),new Date(t.sys.sunset*1e3);const a=s.getHours().toString().padStart(2,"0"),o=s.getMinutes().toString().padStart(2,"0");q.textContent=`${a}:${o}`,t.dt>t.sys.sunrise&&t.dt<t.sys.sunset?(r.classList.remove("night"),r.classList.add("day")):(r.classList.remove("day"),r.classList.add("night")),x.textContent=t.name+" "+t.sys.country,I.textContent=Math.floor(t.main.temp),C.textContent=t.weather[0].description,D.textContent=Math.floor(t.main.temp_min),M.textContent=Math.floor(t.main.temp_max),P.style.transform="rotate("+t.wind.deg+"deg)",O.textContent=t.wind.speed,E.textContent=t.main.humidity,L.textContent=t.main.pressure/1e3;const e=t.weather[0].icon;B.innerHTML=`<img src="./icons/${e}.png"></img>`},h=async t=>{try{return await(await fetch("http://ip-api.com/json/?fields=61439")).json()}catch{const a=navigator.language.split("-")[1];t==null?g("la roda, ES"):g(t+", "+a)}};function N(t){p=t.coords,m=0,z(p)}const $=async t=>{m=1;const s=await h();g(s.city+", "+s.countryCode)};navigator.geolocation.getCurrentPosition(N,$);const g=async t=>{if(t.includes(",")){const a=await(await fetch(d+"&appid="+c+"&q="+t)).json();if(a.message=="city not found"){const o=t.split(",")[0],n=await(await fetch(d+"&appid="+c+"&q="+o)).json();i(n)}else i(a)}else if(m===0){const a=await(await fetch("http://api.openweathermap.org/geo/1.0/reverse?lat="+p.latitude+"&lon="+p.longitude+"&limit=1&appid="+c)).json(),e=await(await fetch(d+"&appid="+c+"&q="+t+", "+a[0].country)).json();if(e.message=="city not found"){const l=await(await fetch(d+"&appid="+c+"&q="+t)).json();i(l)}else i(e);i(e)}else if(m===1){const s=await h(t),o=await(await fetch(d+"&appid="+c+"&q="+t+", "+s.countryCode)).json();if(o.message=="city not found"){const n=await(await fetch(d+"&appid="+c+"&q="+t)).json();i(n)}else i(o)}},z=async t=>{const s=t.longitude,a=t.latitude,n=await(await fetch(S+"lat="+a+"&lon="+s+"&appid="+c+"&lang=sp&units=metric")).json();i(n)};w.addEventListener("submit",t=>{t.preventDefault(),g(v.value)});f.addEventListener("click",t=>{t.preventDefault(),y===0?(u.classList.remove("closed"),u.classList.add("opened"),r.classList.remove("closed2"),r.classList.add("opened2"),y=1,f.textContent="-"):(u.classList.remove("opened"),u.classList.add("closed"),r.classList.remove("opened2"),r.classList.add("closed2"),y=0,f.textContent="+")});
