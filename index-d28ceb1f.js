(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const y of a.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&o(y)}).observe(document,{childList:!0,subtree:!0});function s(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?a.credentials="include":e.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(e){if(e.ep)return;e.ep=!0;const a=s(e);fetch(e.href,a)}})();const P=document.getElementById("capturedHeading"),D=document.getElementById("currentHeading"),A=document.getElementById("alphaDeg"),r=document.getElementById("container"),O=document.getElementById("searchcity"),q=document.getElementById("hum"),H=document.getElementById("pres"),S=document.getElementById("search"),M=document.getElementById("tempcelcius"),$=document.getElementById("weathericon"),N=document.getElementById("description"),W=document.getElementById("zone"),h=document.getElementById("plus"),d=document.getElementById("cristal"),m=document.getElementById("cristal2"),z=document.getElementById("date"),K=document.getElementById("min"),R=document.getElementById("max"),U=document.getElementById("windvel"),X=document.getElementById("winang"),_=document.getElementById("gps"),F=document.getElementById("compass"),f=document.getElementById("compbt"),c="a00065117a35d1c18108761088dca9fa",p="https://api.openweathermap.org/data/2.5/weather?lang=sp&units=metric",G="https://api.openweathermap.org/data/2.5/weather?";let g=0,w=0,E,u=0;const l=t=>{const n=new Date(t.dt*1e3);new Date(t.sys.sunrise*1e3),new Date(t.sys.sunset*1e3);const s=n.getHours().toString().padStart(2,"0"),o=n.getMinutes().toString().padStart(2,"0");z.textContent=`${s}:${o}`,t.dt>t.sys.sunrise&&t.dt<t.sys.sunset?(r.classList.remove("night"),r.classList.add("day")):(r.classList.remove("day"),r.classList.add("night")),W.textContent=t.name+" "+t.sys.country,M.textContent=Math.floor(t.main.temp),N.textContent=t.weather[0].description,K.textContent=Math.floor(t.main.temp_min),R.textContent=Math.floor(t.main.temp_max),X.style.transform="rotate("+t.wind.deg+"deg)",U.textContent=t.wind.speed,q.textContent=t.main.humidity,H.textContent=t.main.pressure/1e3;const e=t.weather[0].icon;$.innerHTML=`<img src="./icons/${e}.png"></img>`},I=async t=>{try{return await(await fetch("http://ip-api.com/json/?fields=61439")).json()}catch{const s=navigator.language.split("-")[1];t==null?v("la roda, ES"):v(t+", "+s)}};function x(t){E=t.coords,w=0,T(E)}const L=async t=>{w=1;const n=await I();v(n.city+", "+n.countryCode)};navigator.geolocation.getCurrentPosition(x,L);const v=async t=>{if(t.includes(",")){const s=await(await fetch(p+"&appid="+c+"&q="+t)).json();if(s.message=="city not found"){const o=t.split(",")[0],a=await(await fetch(p+"&appid="+c+"&q="+o)).json();l(a)}else l(s)}else if(w===0){const s=await(await fetch("http://api.openweathermap.org/geo/1.0/reverse?lat="+E.latitude+"&lon="+E.longitude+"&limit=1&appid="+c)).json(),e=await(await fetch(p+"&appid="+c+"&q="+t+", "+s[0].country)).json();if(e.message=="city not found"){const y=await(await fetch(p+"&appid="+c+"&q="+t)).json();l(y)}else l(e);l(e)}else if(w===1){const n=await I(t),o=await(await fetch(p+"&appid="+c+"&q="+t+", "+n.countryCode)).json();if(o.message=="city not found"){const a=await(await fetch(p+"&appid="+c+"&q="+t)).json();l(a)}else l(o)}},T=async t=>{const n=t.longitude,s=t.latitude,a=await(await fetch(G+"lat="+s+"&lon="+n+"&appid="+c+"&lang=sp&units=metric")).json();l(a)};O.addEventListener("submit",t=>{t.preventDefault(),v(S.value)});h.addEventListener("click",t=>{t.preventDefault(),u===0?g===0?(d.style.transform=" translate(0, 6rem)",r.style.transform="translate(0, -6rem)",m.style.transform="translate(0, -6rem)",g=1,h.textContent="-"):(d.style.transform=" translate(0, 0rem)",r.style.transform="translate(0, -0rem)",m.style.transform="translate(0, -0rem)",g=0,h.textContent="+"):g===0?(d.style.transform=" translate(0, 10rem)",r.style.transform="translate(0, -2rem)",m.style.transform="translate(0, -13rem)",g=1,h.textContent="-"):(d.style.transform=" translate(0, 1rem)",r.style.transform="translate(0, 1rem)",m.style.transform="translate(0, -10rem)",g=0,h.textContent="+")});_.addEventListener("click",t=>{t.preventDefault(),navigator.geolocation.getCurrentPosition(x,L)});f.addEventListener("click",t=>{t.preventDefault(),g===0?u===0?(d.style.transform=" translate(0, 1rem)",r.style.transform="translate(0, 1rem)",m.style.transform="translate(0, -10rem)",u=1,f.style.opacity="1"):(d.style.transform=" translate(0, 0rem)",r.style.transform="translate(0, -0rem)",m.style.transform="translate(0, -0rem)",u=0,f.style.opacity=".5"):u===0?(d.style.transform=" translate(0, 10rem)",r.style.transform="translate(0, -2rem)",m.style.transform="translate(0, -13rem)",u=1,f.style.opacity="1"):(d.style.transform=" translate(0, 1rem)",r.style.transform="translate(0, 1rem)",m.style.transform="translate(0, -10rem)",u=0,f.style.opacity=".5")});(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))&&(f.style.opacity=".5");let i=null;const C=async()=>{navigator.geolocation.getCurrentPosition(t=>(console.log("entra headi"),i=t.coords.heading,console.log(i),i===null&&(console.log("buscando headi2"),console.log(i),C(),console.log("buscando headi")),console.log("salgo headi"),i))};i=C();console.log(i);let B=0;function V(t){const n=t.alpha;navigator.geolocation.getCurrentPosition(o=>{console.log("acual"),B=o.coords.heading,console.log(i),i===null&&(console.log("buscando headi2"),console.log(B),C(),console.log("buscando headi"))});const s=n-i;console.log(` eje X: ${n}`),A.textContent=n,console.log(` eje X: ${i}`),P.textContent=B,console.log(`Diferencia: ${s}`),D.textContent=1,F.style.transform="rotate("+s+"deg)"}window.addEventListener("deviceorientation",V);
